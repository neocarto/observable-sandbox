var s={value:()=>{}};function u(){for(var r=0,i=arguments.length,t={},n;r<i;++r){if(!(n=arguments[r]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new o(t)}function o(r){this._=r}function h(r,i){return r.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}o.prototype=u.prototype={constructor:o,on:function(r,i){var t=this._,n=h(r+"",t),e,a=-1,l=n.length;if(arguments.length<2){for(;++a<l;)if((e=(r=n[a]).type)&&(e=p(t[e],r.name)))return e;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++a<l;)if(e=(r=n[a]).type)t[e]=f(t[e],r.name,i);else if(i==null)for(e in t)t[e]=f(t[e],r.name,null);return this},copy:function(){var r={},i=this._;for(var t in i)r[t]=i[t].slice();return new o(r)},call:function(r,i){if((e=arguments.length-2)>0)for(var t=new Array(e),n=0,e,a;n<e;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,e=a.length;n<e;++n)a[n].value.apply(i,t)},apply:function(r,i,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],e=0,a=n.length;e<a;++e)n[e].value.apply(i,t)}};function p(r,i){for(var t=0,n=r.length,e;t<n;++t)if((e=r[t]).name===i)return e.value}function f(r,i,t){for(var n=0,e=r.length;n<e;++n)if(r[n].name===i){r[n]=s,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:i,value:t}),r}var c=u;export{c as dispatch};
