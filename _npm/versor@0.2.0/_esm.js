/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/versor@0.2.0/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const t=Math.acos,n=Math.asin,r=Math.atan2,e=Math.cos,a=Math.hypot,o=Math.max,s=Math.min,i=Math.PI,c=Math.sin,l=i/180,u=180/i;class f{static fromCartesian([t,n,r]){return[0,r,-n,t]}static fromAngles([t,n,r]){n*=l/2,r=(r||0)*l/2;const a=c(t*=l/2),o=e(t),s=c(n),i=e(n),u=c(r),f=e(r);return[o*i*f+a*s*u,a*i*f-o*s*u,o*s*f+a*i*u,o*i*u-a*s*f]}static toAngles([t,e,a,i]){return[r(2*(t*e+a*i),1-2*(e*e+a*a))*u,n(o(-1,s(1,2*(t*a-i*e))))*u,r(2*(t*i+e*a),1-2*(a*a+i*i))*u]}static interpolateAngles(t,n){const r=f.interpolate(f.fromAngles(t),f.fromAngles(n));return t=>f.toAngles(r(t))}static interpolateLinear([t,n,r,e],[o,s,i,c]){o-=t,s-=n,i-=r,c-=e;const l=new Array(4);return u=>{const f=a(l[0]=t+o*u,l[1]=n+s*u,l[2]=r+i*u,l[3]=e+c*u);return l[0]/=f,l[1]/=f,l[2]/=f,l[3]/=f,l}}static interpolate([n,r,i,l],[u,h,p,A]){let g=f.dot([n,r,i,l],[u,h,p,A]);if(g<0&&(u=-u,h=-h,p=-p,A=-A,g=-g),g>.9995)return f.interpolateLinear([n,r,i,l],[u,h,p,A]);const m=t(o(-1,s(1,g))),M=new Array(4),y=a(u-=n*g,h-=r*g,p-=i*g,A-=l*g);return u/=y,h/=y,p/=y,A/=y,t=>{const a=m*t,o=c(a),s=e(a);return M[0]=n*s+u*o,M[1]=r*s+h*o,M[2]=i*s+p*o,M[3]=l*s+A*o,M}}static dot([t,n,r,e],[a,o,s,i]){return t*a+n*o+r*s+e*i}static multiply([t,n,r,e],[a,o,s,i]){return[t*a-n*o-r*s-e*i,t*o+n*a+r*i-e*s,t*s-n*i+r*a+e*o,t*i+n*s-r*o+e*a]}}const h=f.fromAngles;h.multiply=f.multiply,h.rotation=f.toAngles,h.interpolate=f.interpolateAngles,h.cartesian=function(t){const n=t[0]*l,r=t[1]*l,a=e(r);return[a*e(n),a*c(n),c(r)]},h.delta=function(n,r,a){2==arguments.length&&(a=1);const i=Math.sqrt;function l(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}const u=function(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}(n,r),f=i(l(u,u));if(!f)return[1,0,0,0];const h=a*t(o(-1,s(1,l(n,r))))/2,p=c(h);return[e(h),u[2]/f*p,-u[1]/f*p,u[0]/f*p]};export{h as default};
